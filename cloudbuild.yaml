steps:
  # Check if the directory already exists, if not, clone the repository
  - name: 'gcr.io/cloud-builders/gsutil'
    entrypoint: 'bash'
    args:
      - '-c'
      - |
        if [ ! -d "wholesale_dag_examples" ]; then
          git clone https://github.com/Keerthanaakula2/wholesale_dag_examples
        else
          echo "Directory 'wholesale_dag_examples' already exists, skipping clone step."
        fi

  # Install dependencies
  - name: 'python:3.8'
    entrypoint: 'bash'
    args: ['-c', 'pip install -r requirements.txt']

  # Run Unittest tests for inventory_management_dag
  - name: 'python:3.8'
    entrypoint: 'bash'
    args: ['-c', 'python -m unittest discover tests -p "*_unittest.py"']

  # Run Unittest tests for order_fulfillment_dag
  - name: 'python:3.8'
    entrypoint: 'bash'
    args: ['-c', 'python -m unittest discover tests -p "*_unittest.py"']

  # Run Pytest tests for inventory_management_dag
  - name: 'python:3.8'
    entrypoint: 'bash'
    args: ['-c', 'pytest tests']

  # Run Pytest tests for order_fulfillment_dag
  - name: 'python:3.8'
    entrypoint: 'bash'
    args: ['-c', 'pytest tests']

# ... Other steps for deployment or further testing